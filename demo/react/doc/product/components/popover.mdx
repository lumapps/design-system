```javascript import
import { Popover, Placement, Size, Button, ButtonEmphasis, Orientation, UserBlock, Theme, IconButton } from 'LumX';
import { mdiCellphone, mdiEmail, mdiGoogleHangouts, mdiPhone, mdiSlack } from 'LumX/icons';
```

# Popover

## Default behavior
Popover can be used to display elements above the rest of the UI.
```javascript jsx withThemeSwitcher
(theme) => {
    const demoAnchorStyle = {
        border: '1px solid grey',
        cursor: 'default',
        fontSize: '12px',
        padding: '5px',
        textAlign: 'center',
        width: '100px',
    };

    const demoPopperStyle = {
        fontSize: '10px',
        padding: '5px',
    };

    const demoRandomElementStyle = {
        background: 'repeating-linear-gradient(45deg, #CFCFCF, #CFCFCF 3px, #FFFFFF 3px, #FFFFFF 6px)',
        marginLeft: '3px',
        marginRight: '3px',
    };

    const demoPopoverHolderStyle = {
        alignItems: 'center',
        display: 'flex',
        height: 200,
        justifyContent: 'center',
    };

    const anchorRef = React.useRef(null);
    const popoverRef = React.useRef(null);

    const { computedPosition, isVisible } = Popover.useComputePosition(Placement.BOTTOM, anchorRef, popoverRef, true);

    return (
        <>
            <div style={demoPopoverHolderStyle}>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
                <div ref={anchorRef} style={demoAnchorStyle}>
                    {'This element will act as the anchor'}
                </div>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
            </div>
            <Popover theme={theme} popoverRect={computedPosition} popoverRef={popoverRef} isVisible={isVisible}>
                <div style={demoPopperStyle}>{'This element is the popper and is flying above the UI.'}</div>
            </Popover>
        </>
    );
}
```

## Offset
Popover can be offseted from its anchor point.
```javascript jsx withThemeSwitcher
(theme) => {
    const demoAnchorStyle = {
        border: '1px solid grey',
        cursor: 'default',
        fontSize: '12px',
        padding: '5px',
        textAlign: 'center',
        width: '100px',
    };

    const demoPopperStyle = {
        backgroundColor: 'black',
        borderRadius: '3px',
        color: 'white',
        fontSize: '10px',
        padding: '5px',
        width: '130px',
    };

    const demoRandomElementStyle = {
        background: 'repeating-linear-gradient(45deg, #CFCFCF, #CFCFCF 3px, #FFFFFF 3px, #FFFFFF 6px)',
        marginLeft: '3px',
        marginRight: '3px',
    };

    const demoPopoverHolderStyle = {
        alignItems: 'center',
        display: 'flex',
        height: 200,
        justifyContent: 'center',
    };

    const anchorRef = React.useRef(null);
    const popoverRef = React.useRef(null);

    const { computedPosition, isVisible } = Popover.useComputePosition(Placement.RIGHT, anchorRef, popoverRef, true, { horizontal: -60, vertical: 30 });

    return (
        <>
            <div style={demoPopoverHolderStyle}>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
                <div ref={anchorRef} style={demoAnchorStyle}>
                    {'This element will act as the anchor'}
                </div>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
                <div style={{ ...demoAnchorStyle, ...demoRandomElementStyle }}>{'Random element'}</div>
            </div>
            <Popover theme={theme} popoverRect={computedPosition} popoverRef={popoverRef} isVisible={isVisible}>
                <div style={demoPopperStyle}>{'This element is the popper and is flying above the UI.'}</div>
            </Popover>
        </>
    );
}
```

## Control the popper visibility

```javascript jsx withThemeSwitcher
(theme) => {
    const demoAnchorStyle = {
        border: '1px solid grey',
        cursor: 'default',
        fontSize: '12px',
        padding: '5px',
        textAlign: 'center',
        width: '100px',
    };

    const demoPopperStyle = {
        backgroundColor: 'black',
        borderRadius: '3px',
        color: 'white',
        fontSize: '10px',
        padding: '5px',
        width: '266px',
    };

    const demoPopoverHolderStyle = {
        alignItems: 'center',
        display: 'flex',
        height: 200,
        justifyContent: 'center',
    };

    const [isTooltipDisplayed, setTooltipDisplayed] = React.useState(false);
    const anchorRef = React.useRef(null);
    const popoverRef = React.useRef(null);

    /**
     * Switch tooltip visibility.
     */
    const toggleTooltipDisplay = () => {
        setTooltipDisplayed(!isTooltipDisplayed);
    };

    const { computedPosition, isVisible } = Popover.useComputePosition(
        Placement.RIGHT_END,
        anchorRef,
        popoverRef,
        isTooltipDisplayed,
    );

    return (
        <>
            <div>
                <Button theme={theme} size={Size.s} emphasis={ButtonEmphasis.high} onClick={toggleTooltipDisplay}>
                    Toggle visibility
                </Button>
                <div style={demoPopoverHolderStyle}>
                    <div ref={anchorRef} style={demoAnchorStyle}>
                        {'This element will act as the anchor'}
                    </div>
                </div>
            </div>
            <Popover popoverRect={computedPosition} popoverRef={popoverRef} isVisible={isVisible}>
                <div style={demoPopperStyle}>
                    {
                        'Lorem ipsum dolor sit amet, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,consequat. '
                    }
                </div>
            </Popover>
        </>
    );
};
```

## Using anchor point
Popover can be placed using one of 15 anchor points.
```javascript jsx withThemeSwitcher
(theme) => {
    const demoAnchorStyle = {
        border: '1px solid grey',
        cursor: 'default',
        fontSize: '12px',
        padding: '5px',
        textAlign: 'center',
        width: '100px',
    };

    const demoPopperStyle = {
        backgroundColor: 'black',
        borderRadius: '3px',
        color: 'white',
        fontSize: '10px',
        padding: '5px',
        width: '266px',
    };

    const anchorRef = React.useRef(null);
    const popoverRef = React.useRef(null);

    const [selectedPlacement, setSelectedPlacement] = React.useState(Placement.AUTO);
    const [isTooltipDisplayed, setTooltipDisplayed] = React.useState(false);
    const availablePlacement = [
        Placement.AUTO,
        Placement.AUTO_END,
        Placement.AUTO_START,
        Placement.BOTTOM,
        Placement.BOTTOM_END,
        Placement.BOTTOM_START,
        Placement.LEFT,
        Placement.LEFT_END,
        Placement.LEFT_START,
        Placement.RIGHT,
        Placement.RIGHT_END,
        Placement.RIGHT_START,
        Placement.TOP,
        Placement.TOP_END,
        Placement.TOP_START,
    ];

    const { computedPosition, isVisible } = Popover.useComputePosition(
        selectedPlacement,
        anchorRef,
        popoverRef,
        isTooltipDisplayed,
    );

    function toggleTooltipDisplay(newVisibleState) {
        setTooltipDisplayed(newVisibleState);
    }

    return (
        <div
            onMouseEnter={() => toggleTooltipDisplay(true)}
            onMouseLeave={() => toggleTooltipDisplay(false)}
        >
            <select
                onChange={(evt) =>
                    setSelectedPlacement(evt.target.value)
                }
            >
                {availablePlacement.map((pos, index) => (
                    <option key={index}>{pos}</option>
                ))}
            </select>
            <div style={{ height: 200, display: 'flex', alignItems: 'center', justifyContent: 'center' }}>
                <div ref={anchorRef} style={demoAnchorStyle}>
                    {'This element will act as the anchor'}
                </div>

                <Popover popoverRect={computedPosition} isVisible={isVisible} popoverRef={popoverRef}>
                    <div style={demoPopperStyle}>
                        {
                            'Lorem ipsum dolor sit amet, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,consequat. '
                        }
                    </div>
                </Popover>
            </div>
        </div>
    );
};
```

## Popover matches the anchor width
You can force the width of the popper to match the anchor width.
```javascript jsx withThemeSwitcher
(theme) => {
    const demoAnchorStyle = {
        border: '1px solid grey',
        cursor: 'default',
        fontSize: '12px',
        padding: '5px',
        textAlign: 'center',
        width: '100px',
    };

    const demoPopperStyle = {
        backgroundColor: 'black',
        borderRadius: '3px',
        color: 'white',
        fontSize: '10px',
        padding: '5px',
        width: '100%',
    };

    const demoPopoverHolderStyle = {
        alignItems: 'center',
        display: 'flex',
        height: 200,
        justifyContent: 'space-around',
    };

    const [isTooltipDisplayed, setTooltipDisplayed] = React.useState(false);
    const anchorRef = React.useRef(null);
    const popoverRef = React.useRef(null);

    const { computedPosition, isVisible } = Popover.useComputePosition(
        Placement.BOTTOM_END,
        anchorRef,
        popoverRef,
        isTooltipDisplayed,
        { horizontal: 0, vertical: 0 },
        true,
        true,
    );

    /**
     * Switch tooltip visibility
     * @param newVisibleState Tooltip visibility
     */
    const toggleTooltipDisplay = (newVisibleState) => {
        setTooltipDisplayed(newVisibleState);
    };

    return (
        <>
            <div>
                <div style={demoPopoverHolderStyle}>
                    <div
                        ref={anchorRef}
                        style={{ ...demoAnchorStyle, width: 150 }}
                        onMouseEnter={() => toggleTooltipDisplay(true)}
                        onMouseLeave={() => toggleTooltipDisplay(false)}
                    >
                        {'This element will act as the anchor'}
                    </div>
                </div>
            </div>
            <Popover popoverRef={popoverRef} isVisible={isVisible} popoverRect={computedPosition}>
                <div style={demoPopperStyle}>
                    {
                        'Lorem ipsum dolor sit amet, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,consequat. '
                    }
                </div>
            </Popover>
        </>
    );
};
```

## Using advanced components
```javascript jsx withThemeSwitcher
(theme) => {
    const demoPopoverHolderStyle = {
        display: 'flex',
        height: 250,
        justifyContent: 'center',
        paddingTop: 100,
    };

    const [isCardDisplayed, setCardDisplayed] = React.useState(false);
    let delayer;
    const anchorRef = React.useRef(null);
    const popoverRef = React.useRef(null);

    /**
     * Switch tooltip visibility
     * @param newVisibleState Tooltip visibility
     */
    const toggleCardDisplay = (newVisibleState) => {
        if (delayer) {
            clearTimeout(delayer);
            delayer = null;
        }

        if (!newVisibleState) {
            delayer = setTimeout(() => setCardDisplayed(false), 0);
        } else {
            setCardDisplayed(true);
        }
    };

    const offsets = { vertical: 20 };

    const { computedPosition, isVisible } = Popover.useComputePosition(
        Placement.TOP_START,
        anchorRef,
        popoverRef,
        isCardDisplayed,
        offsets,
    );

    const createSimpleAction = (theme) => (
        <Button
            emphasis={ButtonEmphasis.medium}
            color={theme === Theme.dark ? 'light' : undefined}
            size={Size.s}
            theme={theme}
        >
            Follow
        </Button>
    );

    const demoActions = [mdiPhone, mdiCellphone, mdiEmail, mdiGoogleHangouts, mdiSlack];

    const createMultipleActions = (theme) => (
        <>
            {demoActions.map(
                (demoAction, idx) => (
                    <IconButton
                        key={'ubAction'+idx}
                        emphasis={ButtonEmphasis.low}
                        color={theme === Theme.dark ? 'light' : undefined}
                        icon={demoAction}
                        theme={theme}
                    />
                ),
            )}
        </>
    );

    return (
        <>
            <div style={demoPopoverHolderStyle}>
                <UserBlock
                    userBlockRef={anchorRef}
                    theme={theme}
                    name="Guillaume Nachury"
                    fields={['Bidouilleur', 'Meyzieu']}
                    avatar={'http://i.pravatar.cc/139'}
                    orientation={Orientation.horizontal}
                    onMouseEnter={() => toggleCardDisplay(true)}
                    onMouseLeave={() => toggleCardDisplay(false)}
                    size={Size.m}
                />
            </div>
            <Popover popoverRef={popoverRef} isVisible={isVisible} popoverRect={computedPosition}>
                <div
                    style={{
                        display: 'flex',
                        flex: 'auto',
                        justifyContent: 'center',
                        paddingBottom: 16,
                        paddingTop: 25,
                        width: 213,
                    }}
                >
                    <UserBlock
                        theme={theme}
                        name="Guillaume Nachury"
                        fields={['Bidouilleur', 'Meyzieu']}
                        avatar={'http://i.pravatar.cc/139'}
                        orientation={Orientation.vertical}
                        simpleAction={createSimpleAction(theme)}
                        multipleActions={createMultipleActions(theme)}
                    />
                </div>
            </Popover>
        </>
    );
};
```
